--DROP TABLE CUSTOMER;
--DROP TABLE users;

CREATE TABLE CUSTOMER(
		CUSTOMER_id INTEGER generated by DEFAULT AS identity(start with 500 INCREMENT BY 1),
		first_name VARCHAR2(512) NOT NULL,
		last_name VARCHAR2(512) NOT NULL,
		email VARCHAR2(128) NOT NULL,
		signup_date DATE DEFAULT SYSDATE,
		address_id INTEGER,
		CONSTRAINT CUSTOMER_PK PRIMARY KEY (CUSTOMER_id),
		CONSTRAINT CUSTOMER_ADREESS_FK FOREIGN KEY (address_id) REFERENCES ADDRESS_DETAIL(ADDRESS_ID) ON DELETE CASCADE
);


CREATE TABLE users(
		user_name VARCHAR2(200) NOT NULL,
		password VARCHAR2(512) NOT NULL,
		CUSTOMER_ID INTEGER,
		SHOP_ID INTEGER,
		CONSTRAINT USERS_PK PRIMARY KEY (user_name, PASSWORD),
		CONSTRAINT users_customer_FK FOREIGN KEY (CUSTOMER_id) REFERENCES CUSTOMER(CUSTOMER_ID) ON DELETE CASCADE,
		CONSTRAINT users_shop_FK FOREIGN KEY (SHOP_id) REFERENCES SHOP(SHOP_ID) ON DELETE CASCADE
);