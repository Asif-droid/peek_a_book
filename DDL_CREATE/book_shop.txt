--DROP TABLE Book;
--DROP TABLE shop;
--DROP TABLE book_copy;
CREATE TABLE BOOK(
		book_id INTEGER generated by DEFAULT AS identity(start with 10001000 INCREMENT BY 1),
		book_name VARCHAR2(512) NOT NULL,
		book_genre VARCHAR2(512),
		author_id INTEGER NOT NULL,
		publisher_id INTEGER NOT NULL,
		language VARCHAR2(128),
		summary VARCHAR2(3000),
		ISBN VARCHAR2(100) DEFAULT '0',
		pages INTEGER ,
		quantity INTEGER DEFAULT 1,
		edition VARCHAR2(512),
		price_per_book INTEGER NOT NULL,
		ratings decimal(3,2) DEFAULT 0,
		no_of_ratings INTEGER DEFAULT 0,
		CONSTRAINT BOOK_PK PRIMARY KEY (book_id),
		CONSTRAINT BOOK_AUTHOR_FK FOREIGN KEY(author_id) REFERENCES AUTHOR(author_id) ON DELETE CASCADE,
		CONSTRAINT BOOK_PUBLISHER_FK FOREIGN KEY(publisher_id) REFERENCES PUBLISHER(publisher_id) ON DELETE CASCADE 
);

CREATE TABLE Shop(
		shop_id INTEGER generated by DEFAULT AS identity(start with 20020 INCREMENT BY 1),
		shop_name VARCHAR2(512) NOT NULL,
		address_id INTEGER,
		contact_no VARCHAR2(30) NOT NULL,
		email VARCHAR2(100) not NULL,
		description VARCHAR2(3000),
		total_earning INTEGER DEFAULT 0,
		CONSTRAINT SHOP_PK PRIMARY KEY (shop_id),
		CONSTRAINT SHOP_ADREESS_FK FOREIGN KEY (address_id) REFERENCES ADDRESS_DETAIL(ADDRESS_ID) ON DELETE CASCADE	
);

CREATE TABLE BOOK_COPY(
		book_copy_id INTEGER generated by DEFAULT AS identity(start with 100001000 INCREMENT BY 1),	
		book_id INTEGER NOT NULL,
		shop_id INTEGER NOT NULL,
		CONSTRAINT BOOK_COPY_PK PRIMARY KEY (book_copy_id),
		CONSTRAINT BOOK_COPY_BOOK_FK FOREIGN KEY(book_id) REFERENCES BOOK(book_id) ON DELETE CASCADE,
		CONSTRAINT BOOK_COPY_SHOP_FK FOREIGN KEY(shop_id) REFERENCES SHOP(shop_id) ON DELETE CASCADE
);


